<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <title>Tech Challenge ‚Äì Fase 2 ‚Äì An√°lise de Requisitos</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            max-width: 960px;
            margin: 0 auto;
            padding: 24px;
            line-height: 1.6;
            background-color: #0e0e11;
            color: #e5e5e5;
        }
        h1, h2, h3, h4 {
            color: #ffffff;
        }
        h1 {
            text-align: center;
            margin-bottom: 8px;
        }
        h1 + p {
            text-align: center;
            margin-top: 0;
            color: #9aa0b3;
        }
        section {
            background: #1a1c22;
            border-radius: 8px;
            padding: 16px 20px;
            margin-bottom: 16px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.8);
            border: 1px solid #2d2f36;
        }
        .highlight {
            background: #2c2410;
            border-left: 4px solid #d8a21a;
            padding: 8px 12px;
            margin: 8px 0;
            color: #f0e6c1;
        }
        ul, ol {
            padding-left: 22px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 8px 0 12px;
            font-size: 0.95rem;
        }
        th, td {
            border: 1px solid #3a3d46;
            padding: 6px 8px;
            vertical-align: top;
        }
        th {
            background: #2a2c33;
            color: #fff;
        }
        td {
            background: #1c1e24;
        }
        code {
            background: #282c34;
            padding: 2px 5px;
            border-radius: 4px;
            font-family: Consolas, monospace;
            font-size: 0.9em;
            color: #e3e3e3;
            border: 1px solid #3a3d46;
        }
        .small {
            font-size: 0.85rem;
            color: #8d94a6;
        }
        a.btn-swagger {
            background-color: #5a67d8;
            color: white;
            padding: 8px 15px;
            text-decoration: none;
            border-radius: 6px;
            font-weight: bold;
            transition: 0.2s;
        }
        a.btn-swagger:hover {
            background-color: #4854b3;
        }
    </style>
</head>
<body>

    <h1>Tech Challenge ‚Äì Fase 2</h1>
    <p>Documento de An√°lise de Requisitos</p>

    <p style="text-align: right; margin-top: 10px;">
        <a href="http://localhost:8080/swagger-ui/index.html"
           style="background-color: #008000; color: white; padding: 8px 15px; text-decoration: none; border-radius: 6px; font-weight: bold;">
            üìå Acessar Swagger UI
        </a>
    </p>

    <section>
        <h2>1. Contexto do Problema</h2>
        <p>
            Um grupo de restaurantes da mesma regi√£o decidiu compartilhar um √∫nico sistema
            de gest√£o para reduzir custos com solu√ß√µes individuais. A ideia √© construir
            um sistema robusto que:
        </p>
        <ul>
            <li>Permita que os restaurantes gerenciem suas opera√ß√µes de forma eficiente.</li>
            <li>Permita que clientes consultem informa√ß√µes, deixem avalia√ß√µes e fa√ßam pedidos online (em fases futuras).</li>
            <li>Seja entregue em fases, permitindo evolu√ß√£o gradual, ajustes e melhorias cont√≠nuas.</li>
        </ul>

        <p class="highlight">
            A Fase 2 foca na <strong>gest√£o de tipos de usu√°rio</strong>,
            <strong>cadastro de restaurantes</strong> e
            <strong>cadastro de itens de card√°pio</strong>, seguindo boas pr√°ticas de c√≥digo limpo e arquitetura.
        </p>
    </section>

    <section>
        <h2>2. Objetivo da Fase 2</h2>
        <p>
            Expandir o sistema para:
        </p>
        <ul>
            <li>Criar e gerenciar <strong>tipos de usu√°rios</strong> (ex.: Dono de Restaurante, Cliente).</li>
            <li>Criar e gerenciar <strong>restaurantes</strong>, vinculando-os a um <em>dono</em>.</li>
            <li>Criar e gerenciar <strong>itens de card√°pio</strong> vendidos pelos restaurantes.</li>
        </ul>
        <p>
            Al√©m das funcionalidades, a fase exige:
        </p>
        <ul>
            <li>C√≥digo limpo, organizado e bem estruturado (Clean Architecture).</li>
            <li>Documenta√ß√£o da API e do projeto.</li>
            <li>Testes automatizados (unit√°rios e de integra√ß√£o).</li>
            <li>Execu√ß√£o via Docker Compose (aplica√ß√£o + banco de dados).</li>
        </ul>
    </section>

    <section>
        <h2>3. Atores do Sistema</h2>
        <ul>
            <li><strong>Administrador do Sistema</strong> (papel impl√≠cito/operacional)
                <ul>
                    <li>Respons√°vel por configurar tipos de usu√°rio iniciais.</li>
                    <li>Respons√°vel por criar os primeiros usu√°rios e donos de restaurante, se necess√°rio.</li>
                </ul>
            </li>
            <li><strong>Dono de Restaurante</strong>
                <ul>
                    <li>Usu√°rio do tipo "Dono de Restaurante".</li>
                    <li>Respons√°vel por um ou mais restaurantes.</li>
                    <li>Pode cadastrar e gerenciar itens de card√°pio (regras de permiss√£o podem ser expandidas em fases futuras).</li>
                </ul>
            </li>
            <li><strong>Cliente</strong>
                <ul>
                    <li>Usu√°rio do tipo "Cliente".</li>
                    <li>Poder√° consultar card√°pios, avalia√ß√µes e fazer pedidos (em fases futuras).</li>
                </ul>
            </li>
        </ul>
    </section>

    <section>
        <h2>4. Entidades Principais e Regras de Neg√≥cio</h2>

        <h3>4.1. Tipo de Usu√°rio</h3>
        <p>
            Controla o papel de cada usu√°rio dentro do sistema. Exemplos:
            <code>Dono de Restaurante</code>, <code>Cliente</code>.
        </p>

        <h4>4.1.1. Campos</h4>
        <table>
            <tr>
                <th>Campo</th>
                <th>Tipo (conceitual)</th>
                <th>Regra de Neg√≥cio</th>
            </tr>
            <tr>
                <td>id</td>
                <td>Identificador √∫nico</td>
                <td>Gerado automaticamente pelo sistema (chave prim√°ria).</td>
            </tr>
            <tr>
                <td>nome</td>
                <td>Texto</td>
                <td>
                    <ul>
                        <li>Obrigat√≥rio.</li>
                        <li>Deve ser √∫nico (n√£o podem existir dois tipos com o mesmo nome).</li>
                        <li>Tamanho m√°ximo sugerido: 100 caracteres.</li>
                    </ul>
                </td>
            </tr>
        </table>

        <h4>4.1.2. Regras de Associa√ß√£o</h4>
        <ul>
            <li>Cada <strong>Usu√°rio</strong> deve ser associado exatamente a um <strong>Tipo de Usu√°rio</strong>.</li>
            <li>N√£o √© permitido existir Usu√°rio sem Tipo de Usu√°rio definido.</li>
            <li>O sistema deve impedir a exclus√£o de um Tipo de Usu√°rio que possua usu√°rios associados (regra de integridade).</li>
        </ul>

        <h4>4.1.3. Regras de CRUD</h4>
        <ul>
            <li><strong>Criar</strong>: exige preenchimento do campo <code>nome</code>.</li>
            <li><strong>Atualizar</strong>: permite altera√ß√£o do nome, respeitando unicidade.</li>
            <li><strong>Listar</strong>: retornar todos os tipos de usu√°rio ativos.</li>
            <li><strong>Excluir</strong>:
                <ul>
                    <li>Bloqueado se houver usu√°rios utilizando aquele tipo.</li>
                    <li>Como alternativa, pode ser implementado ‚Äúinativar‚Äù em vez de excluir fisicamente (opcional).</li>
                </ul>
            </li>
        </ul>

        <hr />

        <h3>4.2. Usu√°rio</h3>
        <p>
            Representa as pessoas que utilizam o sistema (donos de restaurante e clientes).
            A Fase 2 considera principalmente a necessidade de associar o Usu√°rio ao Tipo de Usu√°rio
            e ao Restaurante (no caso do Dono).
        </p>

        <h4>4.2.1. Regras de Neg√≥cio</h4>
        <ul>
            <li>Todo usu√°rio deve possuir:
                <ul>
                    <li>Identificador √∫nico.</li>
                    <li>Dados b√°sicos (por exemplo: nome, e-mail, senha ‚Äì conforme implementa√ß√£o da fase anterior).</li>
                    <li>Um <strong>Tipo de Usu√°rio</strong> associado.</li>
                </ul>
            </li>
            <li>Somente usu√°rios do tipo <strong>Dono de Restaurante</strong> podem ser associados como ‚Äúdono‚Äù no cadastro de restaurante.</li>
        </ul>

        <hr />

        <h3>4.3. Restaurante</h3>
        <p>
            Entidade que representa cada estabelecimento participante do sistema compartilhado.
        </p>

        <h4>4.3.1. Campos</h4>
        <table>
            <tr>
                <th>Campo</th>
                <th>Tipo (conceitual)</th>
                <th>Regra de Neg√≥cio</th>
            </tr>
            <tr>
                <td>id</td>
                <td>Identificador √∫nico</td>
                <td>Gerado automaticamente pelo sistema (chave prim√°ria).</td>
            </tr>
            <tr>
                <td>nome</td>
                <td>Texto</td>
                <td>
                    <ul>
                        <li>Obrigat√≥rio.</li>
                        <li>Tamanho m√°ximo sugerido: 150 caracteres.</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>endereco</td>
                <td>Texto</td>
                <td>
                    <ul>
                        <li>Obrigat√≥rio.</li>
                        <li>Deve conter pelo menos logradouro e n√∫mero (detalhamento pode ser flexibilizado).</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>tipoCozinha</td>
                <td>Texto</td>
                <td>
                    <ul>
                        <li>Obrigat√≥rio.</li>
                        <li>Exemplos: ‚ÄúItaliana‚Äù, ‚ÄúJaponesa‚Äù, ‚ÄúBrasileira‚Äù, ‚ÄúLanches‚Äù.</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>horarioFuncionamento</td>
                <td>Texto</td>
                <td>
                    <ul>
                        <li>Obrigat√≥rio.</li>
                        <li>Pode ser armazenado como texto (‚ÄúSeg a Sex ‚Äì 11h √†s 23h‚Äù) ou estrutura mais detalhada.</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>dono</td>
                <td>Usu√°rio (refer√™ncia)</td>
                <td>
                    <ul>
                        <li>Obrigat√≥rio.</li>
                        <li>Deve referenciar um <strong>Usu√°rio</strong> existente.</li>
                        <li>O usu√°rio referenciado deve ter Tipo ‚ÄúDono de Restaurante‚Äù.</li>
                    </ul>
                </td>
            </tr>
        </table>

        <h4>4.3.2. Regras de Associa√ß√£o</h4>
        <ul>
            <li>Um <strong>Dono de Restaurante</strong> pode ser respons√°vel por um ou mais restaurantes.</li>
            <li>Um restaurante deve ter sempre exatamente um dono cadastrado.</li>
            <li>N√£o √© permitido cadastrar restaurante sem dono associado.</li>
            <li>N√£o √© permitido remover um dono que esteja associado a restaurante sem tratar essa rela√ß√£o (troca de dono ou bloqueio da exclus√£o).</li>
        </ul>

        <h4>4.3.3. Regras de CRUD</h4>
        <ul>
            <li><strong>Criar</strong>: exige todos os campos obrigat√≥rios preenchidos (nome, endere√ßo, tipo de cozinha, hor√°rio, dono).</li>
            <li><strong>Atualizar</strong>: permite alterar dados, inclusive trocar o dono (desde que o novo seja ‚ÄúDono de Restaurante‚Äù).</li>
            <li><strong>Listar</strong>:
                <ul>
                    <li>Listar todos os restaurantes.</li>
                    <li>Opcionalmente, permitir filtro por tipo de cozinha, nome ou dono.</li>
                </ul>
            </li>
            <li><strong>Excluir</strong>:
                <ul>
                    <li>Bloquear exclus√£o se o restaurante possuir itens de card√°pio ativos (ou aplicar regra de cascata conforme decis√£o de neg√≥cio).</li>
                </ul>
            </li>
        </ul>

        <hr />

        <h3>4.4. Item de Card√°pio</h3>
        <p>
            Representa os itens vendidos pelos restaurantes (pratos, bebidas, sobremesas etc.).
        </p>

        <h4>4.4.1. Campos</h4>
        <table>
            <tr>
                <th>Campo</th>
                <th>Tipo (conceitual)</th>
                <th>Regra de Neg√≥cio</th>
            </tr>
            <tr>
                <td>id</td>
                <td>Identificador √∫nico</td>
                <td>Gerado automaticamente pelo sistema.</td>
            </tr>
            <tr>
                <td>nome</td>
                <td>Texto</td>
                <td>
                    <ul>
                        <li>Obrigat√≥rio.</li>
                        <li>Tamanho m√°ximo sugerido: 150 caracteres.</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>descricao</td>
                <td>Texto</td>
                <td>
                    <ul>
                        <li>Opcional, mas recomendado.</li>
                        <li>Descri√ß√£o do prato/bebida.</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>preco</td>
                <td>Num√©rico (monet√°rio)</td>
                <td>
                    <ul>
                        <li>Obrigat√≥rio.</li>
                        <li>Deve ser maior que zero.</li>
                        <li>Armazenado com precis√£o adequada para valores monet√°rios.</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>disponivelApenasNoLocal</td>
                <td>Booleano</td>
                <td>
                    <ul>
                        <li>Obrigat√≥rio.</li>
                        <li>Indica se o item pode ser consumido apenas no restaurante (true) ou se tamb√©m pode ser pedido em modalidades como delivery (false).</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>caminhoFoto</td>
                <td>Texto</td>
                <td>
                    <ul>
                        <li>Opcional.</li>
                        <li>Armazena apenas o caminho/URL onde a foto estaria salva (a aplica√ß√£o desta fase n√£o faz upload de arquivos).</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>restaurante</td>
                <td>Restaurante (refer√™ncia)</td>
                <td>
                    <ul>
                        <li>Obrigat√≥rio.</li>
                        <li>Item sempre pertence a um restaurante espec√≠fico.</li>
                    </ul>
                </td>
            </tr>
        </table>

        <h4>4.4.2. Regras de Associa√ß√£o</h4>
        <ul>
            <li>Cada item de card√°pio pertence a exatamente um restaurante.</li>
            <li>Um restaurante pode ter m√∫ltiplos itens de card√°pio.</li>
            <li>N√£o √© permitido cadastrar item sem restaurante associado.</li>
        </ul>

        <h4>4.4.3. Regras de CRUD</h4>
        <ul>
            <li><strong>Criar</strong>: exige nome, pre√ßo, indicador ‚Äúdispon√≠vel apenas no restaurante‚Äù e restaurante.</li>
            <li><strong>Atualizar</strong>: permite altera√ß√£o de nome, descri√ß√£o, pre√ßo, disponibilidade e caminho da foto.</li>
            <li><strong>Listar</strong>:
                <ul>
                    <li>Permitir listar itens de um determinado restaurante.</li>
                    <li>Opcional: filtros por nome, faixa de pre√ßo ou disponibilidade.</li>
                </ul>
            </li>
            <li><strong>Excluir</strong>:
                <ul>
                    <li>Permitir exclus√£o se o item n√£o estiver envolvido em pedidos (controle mais detalhado ficar√° para fases futuras).</li>
                </ul>
            </li>
        </ul>
    </section>

    <section>
        <h2>5. Requisitos de Entrega e Crit√©rios de Avalia√ß√£o</h2>

        <h3>5.1. Funcionalidade</h3>
        <ul>
            <li>Disponibilizar os seguintes cadastros com CRUD completo:
                <ul>
                    <li><strong>Tipo de Usu√°rio</strong>.</li>
                    <li><strong>Restaurante</strong>.</li>
                    <li><strong>Item de Card√°pio</strong> (item do restaurante).</li>
                </ul>
            </li>
            <li>Todos os endpoints devem funcionar conforme as regras de neg√≥cio acima.</li>
        </ul>

        <h3>5.2. Qualidade de C√≥digo</h3>
        <ul>
            <li>Uso adequado das pr√°ticas de desenvolvimento com Spring Boot.</li>
            <li>C√≥digo organizado, com camadas bem definidas e responsabilidades claras.</li>
            <li>Coment√°rios e documenta√ß√£o de m√©todos/entidades quando necess√°rio.</li>
        </ul>

        <h3>5.3. Documenta√ß√£o do Projeto</h3>
        <ul>
            <li>Descri√ß√£o do projeto, contexto e objetivo.</li>
            <li>Descri√ß√£o da arquitetura adotada (camadas Domain, Application, Infrastructure, Interfaces).</li>
            <li>Lista de endpoints da API (ex.: via Swagger/OpenAPI).</li>
            <li>Instru√ß√µes de configura√ß√£o e execu√ß√£o:
                <ul>
                    <li>Execu√ß√£o em ambiente de desenvolvimento (perfil <code>dev</code> com H2).</li>
                    <li>Execu√ß√£o em ambiente de produ√ß√£o local (perfil <code>prod</code> com Docker + MySQL).</li>
                </ul>
            </li>
        </ul>

        <h3>5.4. Collections para Teste</h3>
        <ul>
            <li>Disponibilizar Collection do Postman (ou ferramenta equivalente) com:
                <ul>
                    <li>Requisi√ß√µes para CRUD de Tipo de Usu√°rio.</li>
                    <li>Requisi√ß√µes para CRUD de Restaurante.</li>
                    <li>Requisi√ß√µes para CRUD de Item de Card√°pio.</li>
                </ul>
            </li>
        </ul>

        <h3>5.5. Configura√ß√£o Docker Compose</h3>
        <ul>
            <li>Arquivo <code>docker-compose.yml</code> deve:
                <ul>
                    <li>Subir o container da aplica√ß√£o Java (Spring Boot).</li>
                    <li>Subir o container do banco de dados (MySQL).</li>
                    <li>Configurar rede interna e vari√°veis de ambiente para conex√£o.</li>
                </ul>
            </li>
        </ul>

        <h3>5.6. Reposit√≥rio de C√≥digo</h3>
        <ul>
            <li>Reposit√≥rio p√∫blico (GitHub, GitLab, etc.) contendo:
                <ul>
                    <li>C√≥digo-fonte completo.</li>
                    <li>Dockerfile, docker-compose, scripts de deploy.</li>
                    <li>README com instru√ß√µes de execu√ß√£o.</li>
                </ul>
            </li>
        </ul>

        <h3>5.7. Clean Architecture</h3>
        <ul>
            <li>C√≥digo organizado em camadas, por exemplo:
                <ul>
                    <li><strong>Domain</strong>: entidades e regras de neg√≥cio.</li>
                    <li><strong>Application</strong>: casos de uso (servi√ßos de aplica√ß√£o).</li>
                    <li><strong>Infrastructure</strong>: persist√™ncia, JPA, banco de dados, configura√ß√µes.</li>
                    <li><strong>Interfaces</strong>: controladores REST, DTOs e mapeamentos.</li>
                </ul>
            </li>
            <li>As camadas internas n√£o devem depender diretamente das camadas externas (respeito √†s depend√™ncias).</li>
        </ul>

        <h3>5.8. Cobertura de Testes</h3>
        <ul>
            <li><strong>Testes unit√°rios</strong>:
                <ul>
                    <li>Cobertura m√≠nima de ~80% do c√≥digo cr√≠tico (especialmente camada de aplica√ß√£o e regras de neg√≥cio).</li>
                </ul>
            </li>
            <li><strong>Testes de integra√ß√£o</strong>:
                <ul>
                    <li>Verificar integra√ß√£o entre API, servi√ßos, reposit√≥rios e banco de dados.</li>
                    <li>Garantir que os principais fluxos (CRUD das tr√™s entidades) funcionem de ponta a ponta.</li>
                </ul>
            </li>
        </ul>
    </section>

    <section>
        <h2>6. Resumo das Principais Regras de Neg√≥cio</h2>
        <ul>
            <li>Usu√°rio deve estar sempre associado a um Tipo de Usu√°rio.</li>
            <li>Apenas usu√°rios do tipo ‚ÄúDono de Restaurante‚Äù podem ser donos de restaurantes.</li>
            <li>Restaurante deve ter dono obrigatoriamente.</li>
            <li>Item de card√°pio deve sempre pertencer a um restaurante.</li>
            <li>Pre√ßo de item de card√°pio deve ser maior que zero.</li>
            <li>N√£o excluir Tipo de Usu√°rio que esteja sendo usado por Usu√°rios.</li>
            <li>N√£o excluir Dono ou Restaurante/Item sem tratar depend√™ncias associadas.</li>
        </ul>
    </section>

    <p class="small">
        Documento gerado para apoiar a Fase 2 do Tech Challenge ‚Äì gest√£o de tipos de usu√°rio, restaurantes e itens de card√°pio.
    </p>

</body>
</html>
